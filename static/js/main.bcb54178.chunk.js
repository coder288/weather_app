(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{17:function(e,t,a){e.exports=a(33)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(9),l=a(4),o=a(6),s=a(16),i=(a(28),a(29),function(){return c.a.createElement("div",{className:"header__wrapper"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__title"},"Weather")))}),d=(a(30),function(){return c.a.createElement("div",{className:"loader"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),m=function(e){return{type:"LOADING",payload:e}},_=function(e){return{type:"FETCH_WEATHER",args:e}},u=function(e){return{type:"SAVE_WEATHER_TO_STATE",payload:e}},h=(a(31),function(){var e=Object(l.c)((function(e){return e.weather})),t=Object(l.c)((function(e){return e.city})),a=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],n={clear:"\u044f\u0441\u043d\u043e","partly-cloudy":"\u043c\u0430\u043b\u043e\u043e\u0431\u043b\u0430\u0447\u043d\u043e",cloudy:"\u043e\u0431\u043b\u0430\u0447\u043d\u043e \u0441 \u043f\u0440\u043e\u044f\u0441\u043d\u0435\u043d\u0438\u044f\u043c\u0438",overcast:"\u043f\u0430\u0441\u043c\u0443\u0440\u043d\u043e","partly-cloudy-and-light-rain":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u0436\u0434\u044c","partly-cloudy-and-rain":"\u0434\u043e\u0436\u0434\u044c","overcast-and-rain":"\u0441\u0438\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0436\u0434\u044c","overcast-thunderstorms-with-rain":"\u0441\u0438\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0436\u0434\u044c, \u0433\u0440\u043e\u0437\u0430","cloudy-and-light-rain":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u0436\u0434\u044c","overcast-and-light-rain":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u0436\u0434\u044c","cloudy-and-rain":"\u0434\u043e\u0436\u0434\u044c","overcast-and-wet-snow":"\u0434\u043e\u0436\u0434\u044c \u0441\u043e \u0441\u043d\u0435\u0433\u043e\u043c","partly-cloudy-and-light-snow":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043d\u0435\u0433","partly-cloudy-and-snow":"\u0441\u043d\u0435\u0433","overcast-and-snow":"\u0441\u043d\u0435\u0433\u043e\u043f\u0430\u0434","cloudy-and-light-snow":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043d\u0435\u0433","overcast-and-light-snow":"\u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0441\u043d\u0435\u0433","cloudy-and-snow":"\u0441\u043d\u0435\u0433"};return e.days?c.a.createElement("div",{className:"weather"},c.a.createElement("div",{className:"weather__title"},"\u041f\u043e\u0433\u043e\u0434\u0430 ",t?"".concat(t):""),c.a.createElement("div",{className:"weather__days"},c.a.createElement("div",{className:"wth__descr-wrap"},c.a.createElement("div",{className:"wth__descr-items"},c.a.createElement("div",{className:"wth__descr wth__descr--day"},"\u0414\u0435\u043d\u044c"),c.a.createElement("div",{className:"wth__descr wth__descr--night"},"\u041d\u043e\u0447\u044c"))),e.days&&e.days.map((function(e){return c.a.createElement("div",{className:"wth__day",key:e.date},c.a.createElement("div",{className:"wth__col wth__col--date"},c.a.createElement("div",{className:"wth__date"},new Date(e.date).getDate()),c.a.createElement("div",{className:"wth__meta-date"},c.a.createElement("div",{className:"wth__month"},a[new Date(e.date).getMonth()]),c.a.createElement("div",{className:"wth__week"},new Date(e.date).getFullYear()))),c.a.createElement("div",{className:"wth__col wth__col--icon"},c.a.createElement("i",{className:"wth__icon wth__icon--".concat(e.day.condition)})),c.a.createElement("div",{className:"wth__col wth__col--morning"},c.a.createElement("div",{className:"wth__time"},"\u0423\u0442\u0440\u043e"),c.a.createElement("div",{className:"wth__temp wth__temp--".concat(e.morning.condition)},e.morning.temp),c.a.createElement("div",{className:"wth__text-descr"},n[e.morning.condition])),c.a.createElement("div",{className:"wth__col wth__col--day"},c.a.createElement("div",{className:"wth__time"},"\u0414\u0435\u043d\u044c"),c.a.createElement("div",{className:"wth__temp wth__temp--".concat(e.day.condition)},e.day.temp),c.a.createElement("div",{className:"wth__text-descr"},n[e.day.condition])),c.a.createElement("div",{className:"wth__col wth__col--evening"},c.a.createElement("div",{className:"wth__time"},"\u0412\u0435\u0447\u0435\u0440"),c.a.createElement("div",{className:"wth__temp wth__temp--".concat(e.evening.condition)},e.evening.temp),c.a.createElement("div",{className:"wth__text-descr"},n[e.evening.condition])),c.a.createElement("div",{className:"wth__col wth__col--night"},c.a.createElement("div",{className:"wth__time"},"\u041d\u043e\u0447\u044c"),c.a.createElement("div",{className:"wth__temp wth__temp--".concat(e.night.condition)},e.night.temp),c.a.createElement("div",{className:"wth__text-descr"},n[e.night.condition])))})))):c.a.createElement("div",{className:"weather__alert"},"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",c.a.createElement("br",null),c.a.createElement("br",null),"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.")});var w=Object(l.b)()((function(e){var t=e.dispatch,a=Object(l.c)((function(e){return e.loading}));return navigator.geolocation.getCurrentPosition((function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude},n=localStorage.getItem("position");if(!n)return localStorage.setItem("position",JSON.stringify(a)),console.log("\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"),void t(_({source:1,coords:a}));if((n=JSON.parse(n)).lat===a.lat&&n.lng===a.lng){console.log("\u0422\u043e \u0436\u0435 \u043c\u0435\u0441\u0442\u043e");var c=parseInt(localStorage.getItem("lastWeatherQuery"));Date.now()-c>72e5?(t(_({source:1,coords:a})),console.log("\u041d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f")):console.log("\u041f\u0440\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438")}else t(_({source:1,coords:a}));localStorage.getItem("weather")?t(u(JSON.parse(localStorage.getItem("weather")))):t(_({source:1,coords:a})),t(m(!1))})),a?c.a.createElement(d,null):c.a.createElement("div",{className:"weather__wrapper"},c.a.createElement(i,null),c.a.createElement(h,null))})),v={loading:!0,weather:{},coords:{lat:55.18367385864258,lng:30.20479011535645},city:""},E=a(8),g=a.n(E),p=a(5),y=g.a.mark(O),N=g.a.mark(j),f=function(e){var t=e.args,a=new FormData;return a.append("coords",JSON.stringify(t.coords)),fetch("http://beta.mikron.by/w".concat(t.source,"/"),{method:"post",body:a}).then((function(e){return e.json()}))},b=function(e){var t=e.args;return fetch("https://geocode-maps.yandex.ru/1.x/?apikey=783836a5-c84b-49f6-a36c-018dfb67e707&geocode=".concat(t.coords.lng,",").concat(t.coords.lat,"&format=json")).then((function(e){return e.json()}))};function O(e){var t,a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(p.a)((function(){return f(e)}));case 3:return t=n.sent,n.next=6,Object(p.b)(u(t));case 6:return n.next=8,Object(p.a)((function(){return b(e)}));case 8:return a=n.sent,n.next=11,Object(p.b)({type:"SAVE_CITY_NAME_IN_STATE",payload:a.response.GeoObjectCollection.featureMember[2].GeoObject.name});case 11:return localStorage.setItem("weather",JSON.stringify(t)),localStorage.setItem("lastWeatherQuery",t.now.toString()),n.next=15,Object(p.b)(m(!1));case 15:n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(0),console.log(n.t0),n.next=22,Object(p.b)(m(!1));case 22:case"end":return n.stop()}}),y,null,[[0,17]])}function j(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)("FETCH_WEATHER",O);case 2:case"end":return e.stop()}}),N)}var S=Object(s.a)(),T=Object(o.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object.assign({},e,{loading:t.payload});case"SAVE_WEATHER_TO_STATE":return Object.assign({},e,{weather:t.payload});case"SAVE_CITY_NAME_IN_STATE":return Object.assign({},e,{city:t.payload});default:return e}}),Object(o.a)(S));S.run(j),Object(r.render)(c.a.createElement(l.a,{store:T},c.a.createElement(w,null)),document.querySelector(".layout"))}},[[17,1,2]]]);
//# sourceMappingURL=main.bcb54178.chunk.js.map